<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>halfmoon jquery form template</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Halfmoon/1.0.4/css/halfmoon.min.css"/><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  </head>
  <body>
<div class=container>
<form>
<label for="category">Category</label>
<select name=category class="form-control">
<option>-</option>
<option>1</option>
<option>2</option>
<option>3</option>
<option>4</option>
</select>
<label for="date">Date</label>
<input name=date class="form-control" placeholder="Date" type="date"></input><br>
<label for="time">Time</label>
<input name=time class="form-control" placeholder="Time" type="time"></input><br>
<label for="location">Location</label>
<input name=location class="form-control" placeholder="Location"></input><button class="form-control" id="google-maps">ðŸŒŽ</button><br>
<label for="notes">Notes</label>
<textarea name=notes class="form-control"></textarea><br>
<button class="form-control">Save</button>
</form>
</div>
<script>
$(function() {
  $date = $('input[name=date]')
  $time = $('input[name=time]')
  $location = $('input[name=location]')
  $gmaps = $('#google-maps')

  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(showPosition, showError);
  } else {
    $location.val("Geolocation is not supported.");
  }

function showError(error) {
  msg = 'Error'
  switch(error.code) {
    case error.PERMISSION_DENIED:
      msg = "User denied the request for Geolocation."
      break;
    case error.POSITION_UNAVAILABLE:
      msg = "Location information is unavailable."
      break;
    case error.TIMEOUT:
      msg = "The request to get user location timed out."
      break;
    case error.UNKNOWN_ERROR:
      msg = "An unknown error occurred."
      break;
  }
$location.val(msg);
} 

function showPosition(position) {
    lat = position.coords.latitude
    lon = position.coords.longitude
    msg = lat + ',' + lon
    url = 'https://www.google.com/maps?ll=' + msg + '&q=' + msg + '&hl=en&t=m&z=15'
   $location.val(msg);
   $gmaps.click(function() {
    window.open(url, "_blank");
   }) 
}
    var date = new Date();
    var currentDate = date.toISOString().substring(0,10)
    var currentTime = date.toISOString().substring(11,16)
    
    $time.val(currentTime)
    $date.val(currentDate)
})
</script>
  </body>
</html>